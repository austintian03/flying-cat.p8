pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
function _init()
	make_player(24,112)
end

function _update()
	move_player()
end

function _draw()
	cls(1)
	draw_player()
end
-->8
function make_player(x,y)
	g=1
	p={}
	p.x=x
	p.y=y
	p.dx=0
	p.dy=0
	p.spd=3
	p.jmp=8
	p.idle={1,3}
	p.idle_f=rndb(1,2)
	p.idle_ft=15
	p.hp=3
end

function move_player()
	--apply gravity and friction
	p.dy+=g
	if (p.dx>0) p.dx-=p.spd
	if (p.dx<0) p.dx+=p.spd
	--collision with edge of screen
	if (p.y>=112) then
		p.y=112
		p.dy=0
	end
	
	--move left right and jump
	if (btn(0)) p.dx-=p.spd
	if (btn(1)) p.dx+=p.spd
	if (btnp(2)) p.dy=-1*p.jmp
	
	--move to new position
	p.x+=p.dx
	p.y+=p.dy
end

function draw_player()
	--keep track of frame time
	p.idle_ft-=1
	if (p.idle_ft==0) then
		if (p.idle_f==1) then
			p.idle_f=2
		elseif (p.idle_f==2) then
			p.idle_f=1
		end
	p.idle_ft=15
	end
	
	--idle and move
	if (p.dy==0) then
		spr(p.idle[p.idle_f],p.x,p.y,2,2)
	end
	
	--jump
	if (p.dy!=0) then
		spr(p.idle[2],p.x,p.y,2,2)
	end
	
end

function rndb(low,high)
	return flr(rnd(high-low+1)+low)
end
__gfx__
0000000000000000000000000000000000000000ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000005500000000000ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000055000000000000000555000000000ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000005550000000000000555500000000ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000005555000000000005555550000000ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000055555500000000555555555500000ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000005555555555000000033333333000000ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000333333330000000330733073009090ffffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000003307330730090900330033003000a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000330033003000a00003333333300a0900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003333333300a09000033888300a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000033888300a00000000555500a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000555500a0000000005555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000055550000000000005555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000055550000000000003003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000003330033300000000033003300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
